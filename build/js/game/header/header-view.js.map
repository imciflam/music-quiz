{"version":3,"file":"header-view.js","sources":["js/util.js","js/view.js","js/game/header/header-view.js"],"sourcesContent":["export const createElement = (template) => {\n  const outer = document.createElement(`div`);\n  outer.innerHTML = template;\n  return outer.firstElementChild;\n};\n\nexport const $$ = (selector, scope = window.document) => {\n  return scope.querySelector(selector);\n};\n\nconst appElement = $$(`.app`);\n\nexport const changeView = (view) => {\n  appElement.replaceChild(view.element, $$(`section.main`));\n};\n\n\nexport const $on = (eventName, callback, el = appElement) => {\n  el.addEventListener(eventName, (evt) => {\n    callback(evt);\n  });\n};\n\nexport const $trigger = (eventName, data = null) => {\n  let customEvent = new CustomEvent(eventName, {detail: data});\n  appElement.dispatchEvent(customEvent);\n};\n\n","import { createElement } from \"./util\";\n\nexport default class AbstractView {\n  get template() {\n    throw new Error(`Define template for view`);\n  }\n\n  render() {\n    return createElement(this.template.trim());\n  }\n\n  get element() {\n    if (!this._element) {\n      this._element = this.render();\n      this.bind(); //bind to this\n    }\n    return this._element;\n  }\n}\n","import AbstractView from '../../view';\n\nconst mistakes = (errors) => {\n  let mistakeElement = ``;\n  if (errors > 0) {\n    while (errors) {\n      mistakeElement += `<img class=\"main-mistake\" src=\"img/wrong-answer.png\" width=\"35\" height=\"49\">`;\n      errors--;\n    }\n  }\n  return mistakeElement;\n};\n\nexport default class HeaderView extends AbstractView {\n  constructor(errors, time) {\n    super();\n    this.errors = errors;\n    this.time = time;\n  }\n\n  get template() {\n    const minutes = parseInt(this.time / 60, 10);\n    const seconds = this.time - minutes * 60;\n    const zero = (value) => (value < 10) ? `0` : ``;\n    return `\n<header>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"timer\" viewBox=\"0 0 780 780\">\n    <circle\n      cx=\"390\" cy=\"390\" r=\"370\"\n      class=\"timer-line\"\n      style=\"filter: url(.#blur); transform: rotate(-90deg) scaleY(-1); transform-origin: center\"></circle>\n\n    <div class=\"timer-value\" xmlns=\"http://www.w3.org/1999/xhtml\">\n      <span class=\"timer-value-mins\">${zero(minutes)}${minutes}</span><!--\n      --><span class=\"timer-value-dots\">:</span><!--\n      --><span class=\"timer-value-secs\">${zero(seconds)}${seconds}</span>\n    </div>\n  </svg>\n  <div class=\"main-mistakes\">\n    ${mistakes(this.errors)}\n  </div>\n</header>`;\n  }\n}\n\n"],"names":[],"mappings":";;;AAAO,MAAM,aAAa,GAAG,CAAC,QAAQ,KAAK;EACzC,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAC5C,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC;EAC3B,OAAO,KAAK,CAAC,iBAAiB,CAAC;CAChC,CAAC;;AAEF,AAAO,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,KAAK,GAAG,MAAM,CAAC,QAAQ,KAAK;EACvD,OAAO,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;CACtC,CAAC;;AAEF,MAAM,UAAU,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,AAE9B,AAAO,AACL,AAA0D,AAC1D,AAGF,AAAO,AACL,AAEG,AACH,AAEF,AAAO,AACL,AACA,AAAsC,AACtC;;ACxBa,MAAM,YAAY,CAAC;EAChC,IAAI,QAAQ,GAAG;IACb,MAAM,IAAI,KAAK,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC;GAC7C;;EAED,MAAM,GAAG;IACP,OAAO,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;GAC5C;;EAED,IAAI,OAAO,GAAG;IACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;MAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;MAC9B,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;IACD,OAAO,IAAI,CAAC,QAAQ,CAAC;GACtB;CACF;;AChBD,MAAM,QAAQ,GAAG,CAAC,MAAM,KAAK;EAC3B,IAAI,cAAc,GAAG,CAAC,CAAC,CAAC;EACxB,IAAI,MAAM,GAAG,CAAC,EAAE;IACd,OAAO,MAAM,EAAE;MACb,cAAc,IAAI,CAAC,4EAA4E,CAAC,CAAC;MACjG,MAAM,EAAE,CAAC;KACV;GACF;EACD,OAAO,cAAc,CAAC;CACvB,CAAC;;AAEF,AAAe,MAAM,UAAU,SAAS,YAAY,CAAC;EACnD,WAAW,CAAC,MAAM,EAAE,IAAI,EAAE;IACxB,KAAK,EAAE,CAAC;IACR,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GAClB;;EAED,IAAI,QAAQ,GAAG;IACb,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;IAC7C,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,EAAE,CAAC;IACzC,MAAM,IAAI,GAAG,CAAC,KAAK,KAAK,CAAC,KAAK,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAChD,OAAO,CAAC;;;;;;;;;qCASyB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC;;wCAEvB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC;;;;IAI9D,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;SAEnB,CAAC,CAAC;GACR;CACF,;;,;;"}