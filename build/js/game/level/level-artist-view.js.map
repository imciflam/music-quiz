{"version":3,"file":"level-artist-view.js","sources":["js/util.js","js/view.js","js/game/level/level-artist-view.js"],"sourcesContent":["// create element\nexport const createElement = template => {\n  const outer = document.createElement(`div`);\n  outer.innerHTML = template;\n  return outer.firstElementChild;\n};\n\n// make selection\nexport const $$ = (selector, scope = window.document) => {\n  return scope.querySelector(selector);\n};\n\nconst appElement = $$(`.app`);\n\n// replacing screen\nexport const changeView = view => {\n  console.log($$(`section.main`));\n  appElement.replaceChild(view.element, $$(`section.main`));\n};\n\n// listen to event\nexport const $on = (eventName, callback, el = appElement) => {\n  el.addEventListener(eventName, evt => {\n    callback(evt);\n  });\n};\n\n// generate event\nexport const $trigger = (eventName, data = null) => {\n  let customEvent = new CustomEvent(eventName, { detail: data });\n  appElement.dispatchEvent(customEvent);\n};\n","import {createElement} from './util';\n\nexport default class AbstractView {\n\n  get template() {\n    throw new Error(`You have to define template for view`);\n  }\n\n  render() {\n    return createElement(this.template.trim());\n  }\n\n  bind() {\n\n  }\n\n  get element() {\n    if (!this._element) {\n      this._element = this.render();\n      this.bind();\n    }\n    return this._element;\n  }\n\n}\n","import AbstractView from '../../view';\nimport {$on, $trigger} from '../../util';\n\nexport default class LevelArtistView extends AbstractView {\n  constructor(level) {\n    super();\n    this.level = level;\n  }\n\n  get template() {\n    const {title, questions, src} = this.level;\n\n    const questionsTemplate = (data) => {\n      return data.reduce((string, it, index) => {\n        const n = index++;\n        const itemTemplate = `\n<div class=\"main-answer-wrapper\">\n  <input class=\"main-answer-r\" type=\"radio\" id=\"answer-${n}\" name=\"answer\" value=\"val-${n}\"/>\n  <label class=\"main-answer\" for=\"answer-${n}\">\n    <img class=\"main-answer-preview\" src=\"${it.image}\"\n        alt=\"${it.artist}\" width=\"134\" height=\"134\">\n    ${it.artist}\n  </label>\n</div>`.trim();\n        return string + itemTemplate;\n      }, ``);\n    };\n\n    return `\n<section class=\"main main--level main--level-genre\">\n  <div class=\"main-wrap\">\n    <h2 class=\"title main-title\">${title}</h2>\n    <div class=\"player-wrapper\">\n      <div class=\"player\">\n        <audio src=\"${src}\" loop autoplay></audio>\n        <button class=\"player-control player-control--pause\"></button>\n        <div class=\"player-track\">\n          <span class=\"player-status\"></span>\n        </div>\n      </div>\n    </div>\n    <form class=\"main-list\">\n\n      ${questionsTemplate(questions)}\n\n    </form>\n  </div>\n</section>`.trim();\n  }\n\n  bind() {\n    const buttons = [...this.element.querySelectorAll(`.main-answer-r`)];\n    buttons.forEach((button) => {\n      $on(`change`, () => {\n        const answer = button.form.elements.answer.value;\n        $trigger(`answerArtist`, answer);\n      }, button);\n    });\n  }\n}\n"],"names":[],"mappings":"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"}