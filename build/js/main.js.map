{"version":3,"file":"main.js","sources":["js/main.js"],"sourcesContent":["(function () {\n'use strict';\n\n// create an element\nconst createElement = template => {\n  const outer = document.createElement(`div`);\n  outer.innerHTML = template;\n  return outer.firstElementChild\n};\n\n// select an element\nconst $$ = (selector, scope = window.document) => {\n  return scope.querySelector(selector)\n};\n\n// get root element\nconst appElement = $$(`.app`);\n\n// replace screen\nconst changeView = view => {\n  appElement.replaceChild(view.element, $$(`section.main`));\n};\n\n// add event listener on some event\nconst $on = (eventName, callback, el = appElement) => {\n  el.addEventListener(eventName, evt => {\n    callback(evt);\n  });\n};\n// create a custom event to be triggered on\nconst $trigger = (eventName, data = null) => {\n  let customEvent = new CustomEvent(eventName, { detail: data });\n  appElement.dispatchEvent(customEvent);\n};\n\n// base class\nclass AbstractView {\n  get template() {\n    throw new Error(`Provide template for view`);\n  }\n\n  render() {\n    return createElement(this.template.trim());\n  }\n  bind() {} // notifies\n  get element() {\n    if (!this._element) {\n      this._element = this.render();\n      this.bind(); //bind to this\n    }\n    return this._element;\n  }\n}\n\nclass WelcomeView extends AbstractView {\n  constructor(data) {\n    super();\n    this.data = data;\n  }\n\n  get template() {\n    const { name, button, title, rules } = this.data;\n    return `\n<section class=\"main main--welcome\">\n  <section class=\"logo\" title=\"${name}\"><h1>${name}</h1></section>\n  <button class=\"main-play\">${button}</button>\n  <h2 class=\"title main-title\">${title}</h2>\n  <p class=\"text main-text\">${rules.reduce((str, it, index, arr) => {\n    const linebreak = index < arr.length - 1 ? `<br>` : ``;\n    it = it + linebreak;\n    return str + it\n  }, ``)}</p>\n</section>`.trim()\n  }\n\n  // on button click, start game\n  bind() {\n    $on(`click`, () => $trigger(`start`), $$(`.main-play`, this.element));\n  }\n\n  onStart() {}\n}\n\n// todo: customize later\nconst samples = [\n  {\n    artist: `Kevin MacLeod`,\n    name: `Long Stroll`,\n    image: `https://yt3.ggpht.com/-fkDeGauT7Co/AAAAAAAAAAI/AAAAAAAAAAA/dkF5ZKkrxRo/s900-c-k-no-mo-rj-c0xffffff/photo.jpg`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=91624fdc22fc54ed`,\n    genre: `Jazz`\n  },\n  {\n    artist: `Jingle Punks`,\n    name: `In the Land of Rhinoplasty`,\n    image: `https://i.vimeocdn.com/portrait/992615_300x300`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=dc3b4dc549becd6b`,\n    genre: `Rock`\n  },\n  {\n    artist: `Audionautix`,\n    name: `Travel Light`,\n    image: `http://4.bp.blogspot.com/-kft9qu5ET6U/VPFUBi9W-MI/AAAAAAAACYM/UxXilXKYwOc/s1600/audionautix%2BHalf%2BSize.jpg`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=a127d9b7de8a17cf`,\n    genre: `Country`\n  },\n  {\n    artist: `Riot`,\n    name: `\tLevel Plane`,\n    image: `https://i.ytimg.com/vi/jzgM3m8Vp1k/maxresdefault.jpg`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=dfb828f40096184c`,\n    genre: `R&B`\n  },\n  {\n    artist: `Jingle Punks`,\n    name: `Lucky Day`,\n    image: `https://i.vimeocdn.com/portrait/992615_300x300`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=bcbe5be936a32fb1`,\n    genre: `Pop`\n  },\n  {\n    artist: `Gunnar Olsen`,\n    name: `Home Stretch`,\n    image: `https://f4.bcbits.com/img/0004181452_10.jpg`,\n    src: `https://www.youtube.com/audiolibrary_download?vid=bcbe5be936a32fb1`,\n    genre: `Electronic`\n  }\n];\n\nconst levels = [\n  {\n    type: `Genre`,\n    title: `Choose Jazz tracks`,\n    questions: [samples[0], samples[1], samples[2], samples[3]],\n    answer: `1000`\n  },\n  {\n    type: `Genre`,\n    title: `Choose Rock tracks`,\n    questions: [samples[0], samples[1], samples[2], samples[3]],\n    answer: `0110`\n  },\n  {\n    type: `Genre`,\n    title: `Choose Country tracks`,\n    questions: [samples[0], samples[1], samples[2], samples[3]],\n    answer: `0010`\n  },\n  {\n    type: `Genre`,\n    title: `Choose R&B tracks`,\n    questions: [samples[0], samples[1], samples[2], samples[3]],\n    answer: `0001`\n  },\n  {\n    type: `Genre`,\n    title: `Choose Pop tracks`,\n    questions: [samples[4], samples[1], samples[2], samples[3]],\n    answer: `1000`\n  },\n  {\n    type: `Genre`,\n    title: `Choose Electronic tracks`,\n    questions: [samples[0], samples[5], samples[2], samples[3]],\n    answer: `0100`\n  },\n  {\n    type: `Artist`,\n    title: `Who performs this song?`,\n    questions: [samples[0], samples[1], samples[2]],\n    src: samples[0].src,\n    answer: 0\n  },\n  {\n    type: `Artist`,\n    title: `Who performs this song?`,\n    questions: [samples[1], samples[2], samples[3]],\n    src: samples[2].src,\n    answer: 1\n  },\n  {\n    type: `Artist`,\n    title: `Who performs this song?`,\n    questions: [samples[3], samples[2], samples[1]],\n    src: samples[1].src,\n    answer: 2\n  },\n  {\n    type: `Artist`,\n    title: `Who performs this song?`,\n    questions: [samples[0], samples[1], samples[2]],\n    src: samples[1].src,\n    answer: 1\n  }\n];\n\nconst LEVELS_COUNT = 10;\nconst FAST_ANSWER_PERIOD = 30;\nconst MAX_ERRORS_COUNT = 4;\nconst TIME_FOR_GAME = 60 * 5 + 1;\n\nconst label = {\n  GAME: `Guess a melody`,\n\n  TITLE_WIN: `You're a true music fan!`,\n  TITLE_WELCOME: `Game rules`,\n  TITLE_FAIL_TIME: `Alas..`,\n  TITLE_FAIL_TRY: `Such a pity!`,\n\n  BUTTON_WELCOME: `Start game`,\n  BUTTON_WIN: `Play again`,\n  BUTTON_FAIL: `Try again`\n};\n\nconst phrases = {\n  timeIsUp: () => `Time is up!<br>You didn't make it on time.`,\n  noMoreAttempts: () =>\n    `You have run out of attempts.<br>Better luck next time!`,\n  win: ({ place, playersCount, betterThan }) =>\n    `You've taken ${place} place out of ${playersCount} players. It's&nbsp;better than &nbsp;${betterThan}%&nbsp; other players' results`\n};\n\nconst welcome = {\n  name: label.GAME,\n  title: label.TITLE_WELCOME,\n  rules: [\n    `Rules are simple&nbsp;— &nbsp;you have to answer all questions in 5 minites.`,\n    `You can make 3 mistakes.`,\n    `Good luck!`\n  ],\n  button: label.BUTTON_WELCOME\n};\n\nconst resultTry = {\n  name: label.GAME,\n  title: label.TITLE_FAIL_TRY,\n  button: label.BUTTON_FAIL,\n  isWin: false\n};\n\nconst resultTime = {\n  name: label.GAME,\n  title: label.TITLE_FAIL_TIME,\n  button: label.BUTTON_FAIL,\n  content: phrases.timeIsUp(),\n  isWin: false\n};\n\nconst resultWin = {\n  name: label.GAME,\n  title: label.TITLE_WIN,\n  button: label.BUTTON_WIN,\n  isWin: true\n};\n\nconst scoreBoard = [];\n\nconst initialGame = {\n  level: -1,\n  remainingAttempts: MAX_ERRORS_COUNT,\n  time: TIME_FOR_GAME,\n  answers: []\n};\n\n// copy game object and reassign it\nconst tick = game => {\n  game = Object.assign({}, game);\n  game.time--;\n  return game\n};\n\nconst getLevel = (index, allLevels = levels) => allLevels[index];\n\nconst nextLevel = (state, allLevels = levels) => {\n  const index = state.level + 1;\n  if (!getLevel(index, allLevels)) {\n    throw new RangeError(`Can't find level ${index}`)\n  }\n  state.level = index;\n  return state\n};\n\n\n\nconst getAllLevelsTypes = (allLevels = levels) => {\n  return allLevels.map(level => level.type)\n};\n\n//copy game object and reassign it\n\n\nconst getScore = answers => {\n  let score = -1;\n  // if all questions were answered\n  if (answers.length === LEVELS_COUNT) {\n    score = answers.reduce((acc, it) => {\n      let point = -2;\n      if (it.isCorrect) {\n        // if answer was fast\n        point = it.timeSpent < FAST_ANSWER_PERIOD ? 2 : 1;\n      }\n      return acc + point\n    }, 0);\n  }\n  return score\n};\n\nconst getTimeSpent = answers => {\n  let time = answers.reduce((acc, it) => {\n    return acc + it.timeSpent\n  }, 0);\n  return time\n};\n\n// fetching scoreboard and creating array of objs from it, { position, score }\nconst getPosition = (statistics, score) => {\n  const statisticsIndexed = statistics.map(\n    (scoreFromStaticstics, position) => ({\n      position,\n      score: scoreFromStaticstics\n    })\n  );\n\n  // push a new obj\n  statisticsIndexed.push({\n    position: null,\n    score\n  });\n\n  // get new obj's position\n  const position = statisticsIndexed\n    .sort((a, b) => b.score - a.score)\n    .reduce((acc, it, index) => {\n      if (it.position === null) {\n        acc = index;\n      }\n      return acc\n    }, -1);\n\n  if (position === -1) {\n    throw new Error(`Can't define position in Scoreboard`)\n  }\n  return position\n};\n\nconst printResult = (statistics, game) => {\n  let endGameMessage = ``;\n  const score = getScore(game.answers);\n  const time = getTimeSpent(game.answers);\n\n  //if time's not up && there's lives\n  if (game.remainingAttempts > 0 && time < TIME_FOR_GAME) {\n    const position = getPosition(statistics, score);\n    statistics.push(score);\n    statistics.sort((a, b) => b - a);\n\n    const stats = {\n      place: position + 1,\n      playersCount: statistics.length,\n      betterThan: Math.round(\n        ((statistics.length - position - 1) * 100) / statistics.length\n      )\n    };\n    endGameMessage = phrases.win(stats);\n  } else {\n    endGameMessage =\n      time > TIME_FOR_GAME ? phrases.timeIsUp() : phrases.noMoreAttempts();\n  }\n\n  return endGameMessage\n};\n\nclass WelcomeScreen {\n  constructor() {\n    this.view = new WelcomeView(welcome);\n  }\n\n  init() {\n    changeView(this.view);\n  }\n}\n\nvar welcomeScreen = new WelcomeScreen();\n\nclass GameModel {\n  constructor(data = levels) {\n    this.data = data;\n  }\n\n  // modify new object and return new state, react-style\n  update(newState) {\n    this.state = Object.assign({}, this.state, newState);\n    return this.state\n  }\n\n  resetAnswers(state) {\n    state.answers = [];\n  }\n\n  getCurrentLevel() {\n    return getLevel(this.state.level, this.data)\n  }\n\n  nextLevel() {\n    this.update(nextLevel(this.state, this.data));\n  }\n\n  tick() {\n    this.update(tick(this.state));\n  }\n\n  getMistakes() {\n    return MAX_ERRORS_COUNT - this.state.remainingAttempts\n  }\n\n  getLevelType() {\n    return this.getCurrentLevel().type\n  }\n\n  getAllLevelsTypes() {\n    return getAllLevelsTypes()\n  }\n\n  isLastLevel() {\n    return this.state.level === LEVELS_COUNT - 1\n  }\n\n  win() {\n    resultWin.content = printResult(scoreBoard, this.state);\n    resultWin.score = getScore(this.state.answers);\n    resultWin.errors = this.getMistakes();\n  }\n  failOnMistakes() {\n    resultTry.content = printResult(scoreBoard, this.state);\n  }\n}\n\nconst mistakes = errors => {\n  let mistakeElement = ``;\n  if (errors > 0) {\n    // create 1 note for each mistake and clump them together\n    while (errors) {\n      mistakeElement += `<img class=\"main-mistake\" src=\"img/wrong-answer.png\" width=\"35\" height=\"49\">`;\n      errors--;\n    }\n  }\n  return mistakeElement\n};\n\nclass HeaderView extends AbstractView {\n  constructor(errors, time) {\n    super();\n    this.errors = errors;\n    this.time = time;\n  }\n\n  get template() {\n    const minutes = parseInt(this.time / 60, 10);\n    const seconds = this.time - minutes * 60;\n    const zero = value => (value < 10 ? `0` : ``); //show 0 if no left\n    return `\n<header>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"timer\" viewBox=\"0 0 780 780\">\n    <circle\n      cx=\"390\" cy=\"390\" r=\"370\"\n      class=\"timer-line\"\n      style=\"filter: url(.#blur); transform: rotate(-90deg) scaleY(-1); transform-origin: center\"></circle>\n\n    <div class=\"timer-value\" xmlns=\"http://www.w3.org/1999/xhtml\">\n      <span class=\"timer-value-mins\">${zero(minutes)}${minutes}</span><!--\n      --><span class=\"timer-value-dots\">:</span><!--\n      --><span class=\"timer-value-secs\">${zero(seconds)}${seconds}</span>\n    </div>\n  </svg>\n  <div class=\"main-mistakes\">\n    ${mistakes(this.errors)}\n  </div>\n</header>`\n  }\n}\n\nclass LevelGenreView extends AbstractView {\n  constructor(level) {\n    super();\n    this.level = level;\n  }\n\n  get template() {\n    const { title, questions } = this.level;\n\n    const questionsTemplate = data => {\n      return data.reduce((string, it, index) => {\n        const n = index++;\n        const itemTemplate = `\n<div class=\"genre-answer\">\n  <div class=\"player-wrapper\">\n    <div class=\"player\">\n      <audio src=\"${it.src}\"></audio>\n      <button class=\"player-control player-control--play\"></button>\n      <div class=\"player-track\">\n        <span class=\"player-status\"></span>\n      </div>\n    </div>\n  </div>\n  <input type=\"checkbox\" name=\"answer\" value=\"answer-${n}\" id=\"a-${n}\">\n  <label class=\"genre-answer-check\" for=\"a-${n}\"></label>\n</div>`;\n        return string + itemTemplate\n      }, ``)\n    };\n\n    return `\n<section class=\"main main--level main--level-genre\">\n  <div class=\"main-wrap\">\n    <h2 class=\"title\">${title}</h2>\n    <form class=\"genre\">\n\n      ${questionsTemplate(questions)}\n\n      <button class=\"genre-answer-send\" type=\"submit\" disabled>Answer</button>\n    </form>\n  </div>\n</section>`.trim()\n  }\n\n  bind() {\n    const answerButton = $$(`.genre-answer-send`, this.element);\n\n    const checkboxes = [\n      ...this.element.querySelectorAll(`.genre-answer input[type=\"checkbox\"]`)\n    ];\n\n    checkboxes.forEach(checkbox => {\n      $on(\n        `change`,\n        () => {\n          if (checkboxes.some(it => it.checked)) {\n            // if at least 1 checkbox checked, unblock button\n            answerButton.removeAttribute(`disabled`);\n          } else {\n            answerButton.setAttribute(`disabled`, `disabled`); // maybe add alert later?\n          }\n        },\n        checkbox\n      );\n    });\n\n    $on(`click`, evt => this.handlerAnswer(evt), answerButton);\n  }\n\n  handlerAnswer(evt) {\n    evt.preventDefault();\n    const answers = [...evt.target.form.elements.answer];\n    $trigger(`answerGenre`, answers); // new event\n  }\n}\n\nclass LevelArtistView extends AbstractView {\n  constructor(level) {\n    super();\n    this.level = level;\n  }\n\n  get template() {\n    const { title, questions, src } = this.level;\n\n    const questionsTemplate = data => {\n      // for each element in data - template\n      return data.reduce((string, it, index) => {\n        const n = index++;\n        const itemTemplate = `\n<div class=\"main-answer-wrapper\">\n  <input class=\"main-answer-r\" type=\"radio\" id=\"answer-${n}\" name=\"answer\" value=\"val-${n}\"/>\n  <label class=\"main-answer\" for=\"answer-${n}\">\n    <img class=\"main-answer-preview\" src=\"${it.image}\"\n        alt=\"${it.artist}\" width=\"134\" height=\"134\">\n    ${it.artist}\n  </label>\n</div>`.trim();\n        return string + itemTemplate\n      }, ``)\n    };\n    // autoplay, so audio plays automatically\n    return `\n<section class=\"main main--level main--level-genre\">\n  <div class=\"main-wrap\">\n    <h2 class=\"title main-title\">${title}</h2>\n    <div class=\"player-wrapper\">\n      <div class=\"player\">\n        <audio src=\"${src}\" loop autoplay></audio>\n        <button class=\"player-control player-control--pause\"></button>\n        <div class=\"player-track\">\n          <span class=\"player-status\"></span>\n        </div>\n      </div>\n    </div>\n    <form class=\"main-list\">\n\n      ${questionsTemplate(questions)}\n\n    </form>\n  </div>\n</section>`.trim()\n  }\n\n  bind() {\n    const buttons = [...this.element.querySelectorAll(`.main-answer-r`)];\n    buttons.forEach(button => {\n      $on(\n        `change`, // change event fired off\n        () => {\n          const answer = button.form.elements.answer.value;\n          $trigger(`answerArtist`, answer); // new event created\n        },\n        button\n      );\n    });\n  }\n}\n\nconst audio = {\n  BUTTON: `player-control`,\n  PLAY: `player-control--pause`,\n  PAUSE: `player-control--play`\n};\n\nclass GameView extends AbstractView {\n  constructor(model) {\n    super();\n    this.model = model;\n  }\n\n  get template() {\n    return `<section class=\"main\"></section>`\n  }\n\n  bind() {\n    return super.bind()\n  }\n\n  bindAudioHandler() {\n    [...this.level.element.querySelectorAll(`.${audio.BUTTON}`)].forEach(\n      button => {\n        $on(`click`, evt => this.audioHandler(evt), button);\n      }\n    );\n  }\n\n  get view() {\n    return {\n      Genre(level) {\n        return new LevelGenreView(level)\n      },\n      Artist(level) {\n        return new LevelArtistView(level)\n      }\n    }\n  }\n\n  updateLevel(type) {\n    this.level = this.view[type](this.model.getCurrentLevel());\n    this.bindAudioHandler();\n    changeView(this.level);\n    this.updateHeader();\n  }\n\n  updateHeader() {\n    const header = new HeaderView(\n      this.model.getMistakes(),\n      this.model.state.time\n    );\n    const headerElement = $$(`section.main > header`); // for old structure\n    if (headerElement !== null) {\n      headerElement.remove();\n    }\n    $$(`section.main`).prepend(header.element);\n  }\n\n  audioHandler(evt) {\n    if (evt && evt.target) {\n      evt.preventDefault();\n      const el = evt.target;\n      if (el.classList.contains(audio.PAUSE)) {\n        // play\n        [...this.level.element.querySelectorAll(`.${audio.PLAY}`)].forEach(\n          button => {\n            button.classList.remove(audio.PLAY);\n            button.classList.add(audio.PAUSE);\n            button.previousElementSibling.pause();\n          }\n        );\n        el.classList.remove(audio.PAUSE);\n        el.classList.add(audio.PLAY);\n        el.previousElementSibling.play();\n      } else {\n        // pause\n        el.classList.remove(audio.PLAY);\n        el.classList.add(audio.PAUSE);\n        el.previousElementSibling.pause();\n      }\n    }\n  }\n}\n\nclass GameScreen {\n  constructor(data = levels) {\n    this.model = new GameModel(data);\n    this.view = new GameView(this.model);\n    $on(`answerGenre`, evt => this.answerGenreHandler(evt));\n    $on(`answerArtist`, evt => this.answerArtistHandler(evt));\n  }\n\n  init(state = initialGame) {\n    this.model.resetAnswers(state);\n    this.model.update(state);\n    this.model.nextLevel();\n    this.changeLevel(this.model.getLevelType());\n  }\n\n  setAnswer(answer) {\n    const answerObj = {\n      isCorrect: answer === levels[this.model.state.level].answer,\n      timeSpent: 20\n    };\n    const answers = this.model.state.answers;\n    answers.push(answerObj);\n    let remainingAttempts = this.model.state.remainingAttempts;\n    if (!answerObj.isCorrect) {\n      remainingAttempts--;\n    }\n\n    this.model.update({\n      answers,\n      remainingAttempts\n    });\n  }\n\n  setGame() {\n    if (\n      this.model.isLastLevel() &&\n      this.model.getMistakes() < MAX_ERRORS_COUNT\n    ) {\n      // if last level + enough lives left\n      this.model.win();\n      // Application.win();\n      Application.showResult(`WIN`);\n    } else if (this.model.getMistakes() >= MAX_ERRORS_COUNT) {\n      // too many mistakes\n      this.model.failOnMistakes();\n      // Application.failOnMistakes();\n      Application.showResult(`TRY`);\n    } else {\n      this.model.nextLevel();\n      this.changeLevel(this.model.getLevelType());\n    }\n  }\n\n  changeLevel(type) {\n    this.view.updateLevel(type);\n  }\n\n  tick() {\n    this.model.tick();\n    this.view.updateHeader();\n\n    if (this.model.state.time <= 0) {\n      // Application.failNoMoreTime();\n      Application.showResult(`TIME`);\n    } else {\n      this.timer = setTimeout(() => this.tick(), 1000);\n    }\n  }\n\n  stopTimer() {\n    clearTimeout(this.timer);\n  }\n\n  answerGenreHandler(evt) {\n    const answers = evt.detail;\n    let answerMask = ``;\n    for (let answer of answers) {\n      answerMask += answer.checked ? 1 : 0;\n    }\n    this.setAnswer(answerMask);\n    this.setGame();\n  }\n\n  answerArtistHandler(evt) {\n    const answer = +evt.detail.split(`-`)[1];\n    this.setAnswer(answer);\n    this.setGame();\n  }\n}\n\nclass ResultView extends AbstractView {\n  constructor(data) {\n    super();\n    this.data = data;\n  }\n\n  get template() {\n    const { name, button, title, content, isWin, score, errors } = this.data;\n    const winText = `\nIn&nbsp;3&nbsp;m и 25&nbsp;s\n<br>you&nbsp;got ${score} points (8 quick)\n<br>made ${errors} errors`;\n\n    return `\n<section class=\"main main--result\">\n  <section class=\"logo\" title=\"${name}\"><h1>${name}</h1></section>\n\n  <h2 class=\"title\">${title}</h2>\n  <div class=\"main-stat\">\n    ${isWin ? winText : content}\n  </div>\n  ${isWin ? `<span class=\"main-comparison\">${content}</span>` : ``}\n  <span role=\"button\" tabindex=\"0\" class=\"main-replay\">${button}</span>\n</section>`.trim()\n  }\n\n  bind() {\n    $on(`click`, () => $trigger(`replay`), $$(`.main-replay`, this.element));\n  }\n}\n\nclass ResultScreen {\n  constructor(data) {\n    this.view = new ResultView(data);\n  }\n\n  init() {\n    changeView(this.view);\n  }\n}\n\nconst resultData = {\n  TRY: resultTry,\n  TIME: resultTime,\n  WIN: resultWin\n};\n\nclass Application {\n  static init(data) {\n    welcomeScreen.init();\n    Application.game = new GameScreen(data);\n    $on(`start`, Application.startGame);\n    $on(`replay`, Application.startGame);\n  }\n\n  static startGame(evt, state = initialGame) {\n    Application.game.init(state);\n    Application.game.tick();\n  }\n\n  static showResult(type) {\n    Application.game.stopTimer();\n    const resultScreen = new ResultScreen(resultData[type]);\n    resultScreen.init();\n  }\n}\n\nApplication.init(levels);\n\n}());\n\n//# sourceMappingURL=main.js.map\n"],"names":[],"mappings":"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"}